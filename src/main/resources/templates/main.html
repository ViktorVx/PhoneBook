<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      >
<head>
    <div th:insert="~{fragments/bootstrap :: bs-head}"></div>
<!--    <div th:insert="~{fragments/matrixEffect :: effect-css}"></div>-->
    <title>PhoneBook</title>
</head>
<body>
<div th:insert="~{fragments/navbar :: navbar}"></div>
<main>
    <div class="container ml-1">
        <div class="header">
            <h1>Phone book</h1>
            <h2 th:text = "'Hello ' +  ${name} + '!'"></h2>
<!--            <div th:if="${#authorization.expression('hasRole(''ADMIN'')')}">-->
<!--            <a sec:authorize="hasAuthority('ADMIN')" th:href="@{/user}" th:text="'User list'" ></a><br>-->
<!--            </div>-->
<!--            <a th:href="@{/uploads}" th:text="'Uploads'"></a>-->
            <div>
                <h3>Add new contact</h3>
                <form method="post" action="#" th:action="@{/addContact}" enctype="multipart/form-data">
                    First name<input type="text" name="firstName" placeholder="Enter name"/>
                    Last name<input type="text" name="lastName" placeholder="Enter last name"/>
                    <input type="file" name="file">
                    <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>
                    <button type="submit">Send</button>
                </form>
            </div>
            <div>
                <h3>Filter contacts</h3>
                <form method="get" action="#" th:action="@{/filter}">
                    First name<input type="text" name="firstName" placeholder="Enter name"/>
                    Last name<input type="text" name="lastName" placeholder="Enter last name"/>
                    <button type="submit">Find</button>
                </form>
            </div>
            <table>
                <tr>
                    <th>First name</th>
                    <th>Last name</th>
                    <th>Owner</th>
                    <th>Header</th>
                </tr>
                <tr th:each="contact : ${contacts}">
                    <td th:text="${contact.firstName}"></td>
                    <td th:text="${contact.lastName}"></td>
                    <td th:text="${contact.ownerName}"></td>
                    <td>
                        <div>
                            <img th:src="'/img/' + ${contact.photoPath}">
    <!--                        <img src="/img/${contact.photoPath}">-->
                        </div>
                    </td>
                </tr>
            </table>
        </div>
        <form th:action="@{/logout}" method="post">
            <input type="submit" value="Sign Out"/>
        </form>
    </div>
</main>
    <div th:insert="~{fragments/bootstrap :: bs-scripts}"></div>
</body>
</html>